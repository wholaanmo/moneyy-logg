import{_ as f,N as _,c as n,a as l,b as k,r as d,t as p,d as t,w as g,o as i,e as h}from"./index-Cm_z17GR.js";const y={components:{Navigation:_},data(){return{loading:!0,error:"",success:"",needsLogin:!1,groupId:null}},async created(){var e,c;const a=this.$route.query.token;if(!a){this.error="Invalid invitation link - missing token",this.loading=!1;return}try{const r=JSON.parse(localStorage.getItem("user")),s=localStorage.getItem("jsontoken");if(!r||!s){this.needsLogin=!0,this.loading=!1;return}const o=await this.$axios.get(`/api/grp_expenses/accept-invite?token=${a}`,{headers:{Authorization:`Bearer ${s}`}});o.data.success?(this.success=o.data.message,this.groupId=o.data.groupId):this.error=o.data.message||"Failed to accept invitation"}catch(r){this.error=((c=(e=r.response)==null?void 0:e.data)==null?void 0:c.message)||"An error occurred while processing your invitation",console.error("Accept invite error:",r)}finally{this.loading=!1}},methods:{goToGroup(){this.groupId?this.$router.push({name:"Group",params:{groupId:this.groupId}}):this.$router.push("/GC")}}},I={class:"accept-invite"},N={key:0,class:"loading"},x={key:1,class:"error"},G={key:2,class:"success"},S={key:3,class:"needs-login"},b={class:"auth-options"};function C(a,e,c,r,s,o){const v=d("Navigation"),u=d("router-link");return i(),n("div",I,[l(v),s.loading?(i(),n("div",N," Processing invitation... ")):s.error?(i(),n("div",x,p(s.error),1)):s.success?(i(),n("div",G,[e[1]||(e[1]=t("h2",null,"Success!",-1)),t("p",null,p(s.success),1),t("button",{onClick:e[0]||(e[0]=(...m)=>o.goToGroup&&o.goToGroup(...m)),class:"btn-primary"}," Go to Group ")])):s.needsLogin?(i(),n("div",S,[e[4]||(e[4]=t("h2",null,"Invitation Received",-1)),e[5]||(e[5]=t("p",null,"You need to log in to accept this invitation.",-1)),t("div",b,[l(u,{to:"/login",class:"btn-primary"},{default:g(()=>e[2]||(e[2]=[h(" Log In ")])),_:1}),l(u,{to:"/register",class:"btn-secondary"},{default:g(()=>e[3]||(e[3]=[h(" Sign Up ")])),_:1})])])):k("",!0)])}const w=f(y,[["render",C]]);export{w as default};
